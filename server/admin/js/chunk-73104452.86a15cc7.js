(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73104452"],{"3dc2":function(t,e,n){"use strict";var r=n("ec7f"),a=n.n(r);a.a},b0c0:function(t,e,n){var r=n("83ab"),a=n("9bf2").f,o=Function.prototype,i=o.toString,c=/^\s*function ([^ (]*)/,u="name";r&&!(u in o)&&a(o,u,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(t){return""}}})},db5f:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"form",attrs:{inline:!1,"label-width":"80px",size:"normal"}},[n("h1",[t._v(t._s(t.id?"编辑":"新建")+"更新日志")]),n("el-divider"),n("el-form-item",{attrs:{label:"发布者"}},[n("el-input",{attrs:{disabled:""},model:{value:t.model.author,callback:function(e){t.$set(t.model,"author",e)},expression:"model.author"}})],1),n("el-form-item",{staticStyle:{width:"1000px"},attrs:{label:"详细日志"}},[n("vue-editor",{attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.model.content,callback:function(e){t.$set(t.model,"content",e)},expression:"model.content"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("发布日志")])],1)],1)},a=[],o=(n("b0c0"),n("96cf"),n("1da1")),i=n("5873"),c={props:{id:{}},components:{VueEditor:i["a"]},data:function(){return{model:{author:""}}},mounted:function(){this.getAuthorization(),this.id&&this.findById()},methods:{save:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.id){e.next=5;break}return e.next=3,t.$http.put("/crud/logs/".concat(t.id),t.model);case 3:e.next=7;break;case 5:return e.next=7,t.$http.post("/crud/logs",t.model);case 7:t.$router.push("/logs/list");case 8:case"end":return e.stop()}}),e)})))()},findById:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/crud/logs/".concat(t.id));case 2:n=e.sent,t.$set(t.model,"author",n.data.data.author),t.$set(t.model,"content",n.data.data.content);case 5:case"end":return e.stop()}}),e)})))()},handleImageAdded:function(t,e,n,r){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function o(){var i,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i=new FormData,i.append("file",t),o.next=4,a.$http.post("/upload",i);case 4:c=o.sent,e.insertEmbed(n,"image",c.data.data.url),r();case 7:case"end":return o.stop()}}),o)})))()},getAuthorization:function(){var t=JSON.parse(localStorage.getItem("userinfo"));this.model.author=t.Rights_Groups.name}}},u=c,s=(n("3dc2"),n("2877")),d=Object(s["a"])(u,r,a,!1,null,"f93a9186",null);e["default"]=d.exports},ec7f:function(t,e,n){}}]);
//# sourceMappingURL=chunk-73104452.86a15cc7.js.map