(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76e4a66a"],{"6d1b":function(e,t,a){"use strict";var r=a("bd29"),n=a.n(r);n.a},bd29:function(e,t,a){},ead0:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{inline:!1,"label-width":"80px",size:"normal"}},[a("h1",[e._v(e._s(e.id?"编辑":"新建")+"文章")]),a("el-divider"),a("el-form-item",{attrs:{label:"文章分类"}},[a("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"文章标题"}},[a("el-input",{model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("el-form-item",{staticStyle:{width:"1000px"},attrs:{label:"文章内容"}},[a("vue-editor",{attrs:{useCustomImageHandler:""},on:{"image-added":e.handleImageAdded},model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},n=[],i=(a("96cf"),a("1da1")),o=a("5873"),s={props:{id:{}},components:{VueEditor:o["a"]},data:function(){return{model:{},categories:[]}},mounted:function(){this.fetchCategories(),this.id&&this.findById()},methods:{save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return t.next=3,e.$http.put("/crud/articles/".concat(e.id),e.model);case 3:t.next=7;break;case 5:return t.next=7,e.$http.post("/crud/articles",e.model);case 7:e.$router.push("/articles/list");case 8:case"end":return t.stop()}}),t)})))()},findById:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/crud/articles/".concat(e.id));case 2:a=t.sent,e.$set(e.model,"categories",a.data.data.categories),e.$set(e.model,"title",a.data.data.title),e.$set(e.model,"content",a.data.data.content);case 6:case"end":return t.stop()}}),t)})))()},handleImageAdded:function(e,t,a,r){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=new FormData,o.append("file",e),i.next=4,n.$http.post("/upload",o);case 4:s=i.sent,t.insertEmbed(a,"image",s.data.data.url),r();case 7:case"end":return i.stop()}}),i)})))()},fetchCategories:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/crud/categories/list");case 2:a=t.sent,e.categories=a.data.data;case 4:case"end":return t.stop()}}),t)})))()}}},c=s,l=(a("6d1b"),a("2877")),d=Object(l["a"])(c,r,n,!1,null,"aacea5a0",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-76e4a66a.22f3d4e5.js.map