{"version":3,"sources":["webpack:///./src/views/logUpdate/logEdit.vue?ac41","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/logUpdate/logEdit.vue?aca7","webpack:///src/views/logUpdate/logEdit.vue","webpack:///./src/views/logUpdate/logEdit.vue?5de7","webpack:///./src/views/logUpdate/logEdit.vue"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","render","_vm","_h","$createElement","_c","_self","ref","attrs","_v","_s","id","model","value","callback","$$v","$set","expression","staticStyle","on","handleImageAdded","save","staticRenderFns","props","components","VueEditor","data","author","mounted","getAuthorization","findById","methods","res","Rights_Groups","name","component"],"mappings":"kHAAA,yBAAyjB,EAAG,G,qBCA5jB,IAAIA,EAAc,EAAQ,QACtBC,EAAiB,EAAQ,QAAuCC,EAEhEC,EAAoBC,SAASC,UAC7BC,EAA4BH,EAAkBI,SAC9CC,EAAS,wBACTC,EAAO,OAIPT,KAAiBS,KAAQN,IAC3BF,EAAeE,EAAmBM,EAAM,CACtCC,cAAc,EACdC,IAAK,WACH,IACE,OAAOL,EAA0BM,KAAKC,MAAMC,MAAMN,GAAQ,GAC1D,MAAOO,GACP,MAAO,Q,yCCjBf,IAAIC,EAAS,WAAa,IAAIC,EAAIJ,KAASK,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,IAAI,OAAOC,MAAM,CAAC,QAAS,EAAM,cAAc,OAAO,KAAO,WAAW,CAACH,EAAG,KAAK,CAACH,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,GAAI,KAAM,MAAM,UAAUN,EAAG,cAAcA,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,SAAW,IAAII,MAAM,CAACC,MAAOX,EAAIU,MAAY,OAAEE,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIU,MAAO,SAAUG,IAAME,WAAW,mBAAmB,GAAGZ,EAAG,eAAe,CAACa,YAAY,CAAC,MAAQ,UAAUV,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,aAAa,CAACG,MAAM,CAAC,sBAAwB,IAAIW,GAAG,CAAC,cAAcjB,EAAIkB,kBAAkBR,MAAM,CAACC,MAAOX,EAAIU,MAAa,QAAEE,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIU,MAAO,UAAWG,IAAME,WAAW,oBAAoB,GAAGZ,EAAG,eAAe,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWW,GAAG,CAAC,MAAQjB,EAAImB,OAAO,CAACnB,EAAIO,GAAG,WAAW,IAAI,IACz1Ba,EAAkB,G,8CCkBtB,GACEC,MAAO,CACLZ,GAAI,IAENa,WAAY,CACVC,UAAJ,QAEEC,KAPF,WAQI,MAAO,CACLd,MAAO,CACLe,OAAQ,MAIdC,QAdF,WAeI9B,KAAK+B,mBACL/B,KAAKa,IAAMb,KAAKgC,YAElBC,QAAS,CAEP,KAFJ,WAEA,4JACA,KADA,gCAEA,gDAFA,6CAIA,mCAJA,OAMA,6BANA,8CASI,SAXJ,WAWA,8KACA,wCADA,OACA,EADA,OAGA,4CACA,8CAJA,8CASI,iBApBJ,SAoBA,gLAKA,eACA,mBANA,SAOA,0BAPA,OAOA,EAPA,OASA,yCACA,IAVA,8CA0BIF,iBA9CJ,WA+CM,IAAN,+CACM/B,KAAKc,MAAMe,OAASK,EAAIC,cAAcC,QCrFoT,I,wBCQ5VC,EAAY,eACd,EACAlC,EACAqB,GACA,EACA,KACA,WACA,MAIa,aAAAa,E","file":"js/chunk-73104452.86a15cc7.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logEdit.vue?vue&type=style&index=0&id=f93a9186&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logEdit.vue?vue&type=style&index=0&id=f93a9186&lang=scss&scoped=true&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",attrs:{\"inline\":false,\"label-width\":\"80px\",\"size\":\"normal\"}},[_c('h1',[_vm._v(_vm._s(_vm.id? '编辑': '新建')+\"更新日志\")]),_c('el-divider'),_c('el-form-item',{attrs:{\"label\":\"发布者\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.model.author),callback:function ($$v) {_vm.$set(_vm.model, \"author\", $$v)},expression:\"model.author\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"1000px\"},attrs:{\"label\":\"详细日志\"}},[_c('vue-editor',{attrs:{\"useCustomImageHandler\":\"\"},on:{\"image-added\":_vm.handleImageAdded},model:{value:(_vm.model.content),callback:function ($$v) {_vm.$set(_vm.model, \"content\", $$v)},expression:\"model.content\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"发布日志\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-form :inline=\"false\" label-width=\"80px\" ref=\"form\" size=\"normal\">\r\n    <h1>{{id? '编辑': '新建'}}更新日志</h1>\r\n    <el-divider></el-divider>\r\n    <el-form-item label=\"发布者\">\r\n      <el-input disabled v-model=\"model.author\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"详细日志\" style=\"width:1000px\">\r\n      <vue-editor @image-added=\"handleImageAdded\" useCustomImageHandler v-model=\"model.content\"></vue-editor>\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-button @click=\"save\" type=\"primary\">发布日志</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nimport { VueEditor } from 'vue2-editor'\r\n\r\nexport default {\r\n  props: {\r\n    id: {}\r\n  },\r\n  components: {\r\n    VueEditor\r\n  },\r\n  data() {\r\n    return {\r\n      model: {\r\n        author: ''\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getAuthorization()\r\n    this.id && this.findById()\r\n  },\r\n  methods: {\r\n    // 创建 or 编辑 分类名称\r\n    async save() {\r\n      if (this.id) {\r\n        await this.$http.put(`/crud/logs/${this.id}`, this.model)\r\n      } else {\r\n        await this.$http.post('/crud/logs', this.model)\r\n      }\r\n      this.$router.push('/logs/list')\r\n    },\r\n    // 查询单条数据\r\n    async findById() {\r\n      const res = await this.$http.get(`/crud/logs/${this.id}`)\r\n      // console.log('进入了编辑页面')\r\n      this.$set(this.model, 'author', res.data.data.author)\r\n      this.$set(this.model, 'content', res.data.data.content)\r\n      // this.model.author = res.data.data.author\r\n      // this.model.content = res.data.data.content\r\n    },\r\n    // 自定义上传图片地址\r\n    async handleImageAdded(file, Editor, cursorLocation, resetUploader) {\r\n      // An example of using FormData\r\n      // NOTE: Your key could be different such as:\r\n      // formData.append('file', file)\r\n\r\n      var formData = new FormData()\r\n      formData.append('file', file)\r\n      const res = await this.$http.post('/upload', formData)\r\n      // console.log(res.data.data.url)\r\n      Editor.insertEmbed(cursorLocation, 'image', res.data.data.url)\r\n      resetUploader()\r\n      // axios({\r\n      //   url: 'https://fakeapi.yoursite.com/images',\r\n      //   method: 'POST',\r\n      //   data: formData\r\n      // })\r\n      // .then(result => {\r\n      //   let url = result.data.url // Get url from response\r\n      //   Editor.insertEmbed(cursorLocation, 'image', url)\r\n      //   resetUploader()\r\n      // })\r\n      // .catch(err => {\r\n      //   console.log(err)\r\n      // })\r\n    },\r\n    // 获取当前用户名\r\n    getAuthorization() {\r\n      const res = JSON.parse(localStorage.getItem('userinfo'))\r\n      this.model.author = res.Rights_Groups.name\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-input {\r\n  width: 300px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logEdit.vue?vue&type=template&id=f93a9186&scoped=true&\"\nimport script from \"./logEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./logEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logEdit.vue?vue&type=style&index=0&id=f93a9186&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f93a9186\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}