{"version":3,"sources":["webpack:///./src/views/article/articleEdit.vue?16b2","webpack:///./src/views/article/articleEdit.vue?80d7","webpack:///src/views/article/articleEdit.vue","webpack:///./src/views/article/articleEdit.vue?02bc","webpack:///./src/views/article/articleEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","_v","_s","id","model","value","callback","$$v","$set","expression","_l","item","key","_id","name","staticStyle","on","handleImageAdded","save","staticRenderFns","props","components","VueEditor","data","categories","mounted","fetchCategories","findById","methods","component"],"mappings":"kHAAA,yBAA6jB,EAAG,G,gECAhkB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,IAAI,OAAOC,MAAM,CAAC,QAAS,EAAM,cAAc,OAAO,KAAO,WAAW,CAACH,EAAG,KAAK,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,GAAI,KAAM,MAAM,QAAQN,EAAG,cAAcA,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,SAAW,IAAII,MAAM,CAACC,MAAOZ,EAAIW,MAAgB,WAAEE,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIW,MAAO,aAAcG,IAAME,WAAW,qBAAqBhB,EAAIiB,GAAIjB,EAAc,YAAE,SAASkB,GAAM,OAAOd,EAAG,YAAY,CAACe,IAAID,EAAKE,IAAIb,MAAM,CAAC,MAAQW,EAAKG,KAAK,MAAQH,EAAKE,UAAS,IAAI,GAAGhB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOZ,EAAIW,MAAW,MAAEE,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIW,MAAO,QAASG,IAAME,WAAW,kBAAkB,GAAGZ,EAAG,eAAe,CAACkB,YAAY,CAAC,MAAQ,UAAUf,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,aAAa,CAACG,MAAM,CAAC,sBAAwB,IAAIgB,GAAG,CAAC,cAAcvB,EAAIwB,kBAAkBb,MAAM,CAACC,MAAOZ,EAAIW,MAAa,QAAEE,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIW,MAAO,UAAWG,IAAME,WAAW,oBAAoB,GAAGZ,EAAG,eAAe,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWgB,GAAG,CAAC,MAAQvB,EAAIyB,OAAO,CAACzB,EAAIQ,GAAG,SAAS,IAAI,IACrpCkB,EAAkB,G,oCCuBtB,GACEC,MAAO,CACLjB,GAAI,IAENkB,WAAY,CACVC,UAAJ,QAEEC,KAPF,WAQI,MAAO,CACLnB,MAAO,GACPoB,WAAY,KAGhBC,QAbF,WAcI/B,KAAKgC,kBACLhC,KAAKS,IAAMT,KAAKiC,YAElBC,QAAS,CAEP,KAFJ,WAEA,4JACA,KADA,gCAEA,oDAFA,6CAIA,uCAJA,OAMA,iCANA,8CASI,SAXJ,WAWA,8KACA,4CADA,OACA,EADA,OAGA,oDACA,0CACA,8CALA,8CAUI,iBArBJ,SAqBA,gLAKA,eACA,mBANA,SAOA,0BAPA,OAOA,EAPA,OASA,yCACA,IAVA,8CA0BI,gBA/CJ,WA+CA,8KACA,qCADA,OACA,EADA,OAEA,yBAFA,gDCxFoW,I,wBCQhWC,EAAY,eACd,EACArC,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAAU,E","file":"js/chunk-76e4a66a.22f3d4e5.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleEdit.vue?vue&type=style&index=0&id=aacea5a0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleEdit.vue?vue&type=style&index=0&id=aacea5a0&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",attrs:{\"inline\":false,\"label-width\":\"80px\",\"size\":\"normal\"}},[_c('h1',[_vm._v(_vm._s(_vm.id? '编辑': '新建')+\"文章\")]),_c('el-divider'),_c('el-form-item',{attrs:{\"label\":\"文章分类\"}},[_c('el-select',{attrs:{\"multiple\":\"\"},model:{value:(_vm.model.categories),callback:function ($$v) {_vm.$set(_vm.model, \"categories\", $$v)},expression:\"model.categories\"}},_vm._l((_vm.categories),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"文章标题\"}},[_c('el-input',{model:{value:(_vm.model.title),callback:function ($$v) {_vm.$set(_vm.model, \"title\", $$v)},expression:\"model.title\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"1000px\"},attrs:{\"label\":\"文章内容\"}},[_c('vue-editor',{attrs:{\"useCustomImageHandler\":\"\"},on:{\"image-added\":_vm.handleImageAdded},model:{value:(_vm.model.content),callback:function ($$v) {_vm.$set(_vm.model, \"content\", $$v)},expression:\"model.content\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-form :inline=\"false\" label-width=\"80px\" ref=\"form\" size=\"normal\">\r\n    <h1>{{id? '编辑': '新建'}}文章</h1>\r\n    <el-divider></el-divider>\r\n    <el-form-item label=\"文章分类\">\r\n      <el-select multiple v-model=\"model.categories\">\r\n        <el-option :key=\"item._id\" :label=\"item.name\" :value=\"item._id\" v-for=\"item in categories \"></el-option>\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"文章标题\">\r\n      <el-input v-model=\"model.title\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"文章内容\" style=\"width:1000px\">\r\n      <vue-editor @image-added=\"handleImageAdded\" useCustomImageHandler v-model=\"model.content\"></vue-editor>\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-button @click=\"save\" type=\"primary\">保存</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nimport { VueEditor } from 'vue2-editor'\r\n\r\nexport default {\r\n  props: {\r\n    id: {}\r\n  },\r\n  components: {\r\n    VueEditor\r\n  },\r\n  data() {\r\n    return {\r\n      model: {},\r\n      categories: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchCategories()\r\n    this.id && this.findById()\r\n  },\r\n  methods: {\r\n    // 创建 or 编辑 分类名称\r\n    async save() {\r\n      if (this.id) {\r\n        await this.$http.put(`/crud/articles/${this.id}`, this.model)\r\n      } else {\r\n        await this.$http.post('/crud/articles', this.model)\r\n      }\r\n      this.$router.push('/articles/list')\r\n    },\r\n    // 查询单条数据\r\n    async findById() {\r\n      const res = await this.$http.get(`/crud/articles/${this.id}`)\r\n      // console.log('进入了编辑页面')\r\n      this.$set(this.model, 'categories', res.data.data.categories)\r\n      this.$set(this.model, 'title', res.data.data.title)\r\n      this.$set(this.model, 'content', res.data.data.content)\r\n      // this.model.author = res.data.data.author\r\n      // this.model.content = res.data.data.content\r\n    },\r\n    // 自定义上传图片地址\r\n    async handleImageAdded(file, Editor, cursorLocation, resetUploader) {\r\n      // An example of using FormData\r\n      // NOTE: Your key could be different such as:\r\n      // formData.append('file', file)\r\n\r\n      var formData = new FormData()\r\n      formData.append('file', file)\r\n      const res = await this.$http.post('/upload', formData)\r\n      // console.log(res.data.data.url)\r\n      Editor.insertEmbed(cursorLocation, 'image', res.data.data.url)\r\n      resetUploader()\r\n      // axios({\r\n      //   url: 'https://fakeapi.yoursite.com/images',\r\n      //   method: 'POST',\r\n      //   data: formData\r\n      // })\r\n      // .then(result => {\r\n      //   let url = result.data.url // Get url from response\r\n      //   Editor.insertEmbed(cursorLocation, 'image', url)\r\n      //   resetUploader()\r\n      // })\r\n      // .catch(err => {\r\n      //   console.log(err)\r\n      // })\r\n    },\r\n    // 获取文章分类\r\n    async fetchCategories() {\r\n      const res = await this.$http.get('/crud/categories/list')\r\n      this.categories = res.data.data\r\n      // console.log(res.data.data)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-input {\r\n  width: 300px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./articleEdit.vue?vue&type=template&id=aacea5a0&scoped=true&\"\nimport script from \"./articleEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./articleEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./articleEdit.vue?vue&type=style&index=0&id=aacea5a0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aacea5a0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}